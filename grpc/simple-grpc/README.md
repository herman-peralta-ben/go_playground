# Simple GRPC

## TLDR;

### Structure

```
simple-grpc/
├── go.mod
├── hello/
│   ├── hello.proto
│   ├── hello.pb.go           ✅ autogenerated
│   └── hello_grpc.pb.go      ✅ autogenerated
├── server/
│   └── main.go
└── client/
    └── main.go
```
### Running
```bash
go run server/main.go
```

```bash
go run client/main.go
```

## Procedure

1. Add local dependencies

`cd simple-grpc`

```bash
go get google.golang.org/grpc@latest
```

2. Install protobuf on your system

> Mac
```bash
brew install protobuf
```

> Ubuntu
```bash
sudo apt install -y protobuf-compiler
```

3. Install Go CLI commands on your system

```bash
go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest
```
* Add `$GOPATH/bin` to the `$PATH`.
  * `nano ~/.zshenv`
    * Add 
```
# Go
export GOPATH="$HOME/go/bin"
export PATH=$GOPATH:$PATH
```
  * Load changes:
```bash
source ~/.zshenv
```
  * Verify
```bash
which protoc-gen-go
which protoc-gen-go-grpc
```

4. Generate Go files from `hello/hello.proto`.

|File|Contains|Usage|
|----|--------|-----|
|`hello.proto`|gRPC messages and service definition|Original protobuf file|
|`hello.pb.go`|`Generated` Go code with message definition|Serialization|
|`hello_grpc.pb.go`|`Generated` Go code with service definition|gRPC Server and Client|

```bash
protoc --go_out=. --go-grpc_out=. \
  --go_opt=paths=source_relative \
  --go-grpc_opt=paths=source_relative \
  hello/hello.proto
cd ..
```
